<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
    <title>Troubleshooting a misconfigured kublete :: Terminal</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Troubleshooting a misconfigured kublete Lab
A Kublete is the agent that runs in the nodes that directly communicates with the Apiserver receiving instructions from the control node as a podspec. The kubelet receives a podspec which is a YAML file from the apiserver that describes how the containers should be running. The kublet makes sure that the nodes are healthy and ready t context In this lab, the kublete in node01 is not working and you can confirm that by getting to the node01 and checking the kubelet service status $ ssh node01 $ systemctl status kubelet # for older systems $ service status kubelet With the kubelet down, this means that we are unable to know the state of our node. This makes it impossible to schedule any pod on it. Get the logs to see any issues raised $ cat /var/log syslog | grep -i kubelet # or $ journalctl -xe | kubelet This should give all logs related to the kubelet and why it failed
" />
<meta name="keywords" content=", " />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="http://localhost:1313/posts/troubleshooting--misconfigured-kublete/" />





  
  <link rel="stylesheet" href="http://localhost:1313/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terminal.min.dd0bf9c7cacb24c1b0184f52f1869b274e06689557468cc7030ccf632328eb97.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Troubleshooting a misconfigured kublete">
<meta property="og:description" content="Troubleshooting a misconfigured kublete Lab
A Kublete is the agent that runs in the nodes that directly communicates with the Apiserver receiving instructions from the control node as a podspec. The kubelet receives a podspec which is a YAML file from the apiserver that describes how the containers should be running. The kublet makes sure that the nodes are healthy and ready t context In this lab, the kublete in node01 is not working and you can confirm that by getting to the node01 and checking the kubelet service status $ ssh node01 $ systemctl status kubelet # for older systems $ service status kubelet With the kubelet down, this means that we are unable to know the state of our node. This makes it impossible to schedule any pod on it. Get the logs to see any issues raised $ cat /var/log syslog | grep -i kubelet # or $ journalctl -xe | kubelet This should give all logs related to the kubelet and why it failed
" />
<meta property="og:url" content="http://localhost:1313/posts/troubleshooting--misconfigured-kublete/" />
<meta property="og:site_name" content="Terminal" />

  
  
  <meta property="og:image" content="http://localhost:1313/">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2024-12-03 12:42:47 &#43;0300 EAT" />












</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Alex Nduta
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/articles">Articles</a></li>
        
      
        
          <li><a href="/showcase">CV</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/articles" >Articles</a></li>
        
      
        
          <li><a href="/showcase" >CV</a></li>
        
      
        
          <li><a href="/projects" >Projects</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="http://localhost:1313/posts/troubleshooting--misconfigured-kublete/">Troubleshooting a misconfigured kublete</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-12-03</time><span class="post-author">Alex Kinyanjui</span></div>

  
    <span class="post-tags">
      
      #<a href="http://localhost:1313/tags/"></a>&nbsp;
      
      #<a href="http://localhost:1313/tags/"></a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h1 id="troubleshooting-a-misconfigured-kublete">Troubleshooting a misconfigured kublete<a href="#troubleshooting-a-misconfigured-kublete" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p><a href="https://killercoda.com/killer-shell-cka/scenario/kube-controller-manager-misconfigured">Lab</a></p>
<ul>
<li>A <code>Kublete</code> is the agent that runs in the nodes that directly communicates with the <code>Apiserver</code> receiving instructions from the control node as a <code>podspec</code>.</li>
<li>The kubelet receives a  podspec which is a YAML file from the apiserver that describes how the containers should be running. The kublet makes sure that the nodes are healthy and ready t</li>
</ul>
<h2 id="context">context<a href="#context" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>In this lab, the <code>kublete</code> in <em>node01</em> is not working and you can confirm that by getting to the node01 and checking the kubelet service status</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ ssh node01
</span></span><span style="display:flex;"><span>$ systemctl status kubelet
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for older systems</span>
</span></span><span style="display:flex;"><span>$ service status kubelet
</span></span></code></pre></div><ul>
<li>With the kubelet down, this means that we are unable to know the state of our node. This makes it impossible to schedule any pod on it.</li>
<li>Get the logs to see any issues raised</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ cat /var/log syslog | grep -i kubelet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ journalctl -xe | kubelet
</span></span></code></pre></div><p>This should give all logs related to the kubelet and why it failed</p>
<h2 id="fix">fix<a href="#fix" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>In this lab, the error is in the flags. we need to make edits to the kubeadm configuration.</li>
<li>The easiest way to know what configuration file to work with is to use the <code>find</code> command then filter using <code>grep</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ find / | grep -i kubeadm
</span></span><span style="display:flex;"><span><span style="color:#75715e"># make edits to the file containinig the `flag`</span>
</span></span><span style="display:flex;"><span>$ vi /var/lib/kubelet/kubeadm-flags.env
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#reload the service</span>
</span></span><span style="display:flex;"><span>$ systemctl restart kubelet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># confirm the service is running</span>
</span></span><span style="display:flex;"><span>$ systemctl status kubelet
</span></span></code></pre></div>
      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h"></span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="http://localhost:1313/posts/troubleshooting-misconfigured-kube-controller-manager/" class="button inline prev">
        Troubleshooting a misconfigured kube-controller manager
      </a>
    
    
      ::
    
    
      <a href="http://localhost:1313/posts/what-is-kubernetes/" class="button inline next">
        What is Kubernetes ?
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
