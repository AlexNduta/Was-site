<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
    <title>Troubleshooting a misconfigured kube-controller manager :: Terminal</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Troubleshooting a misconfigured kube-controller manager Lab The main role of a kube-controller manager is to check the health of running containers. This means that in a k8s cluster, if the kube-controller is not operational, it would be impossible to detect failed applications to trigger the sel-healing mechanism which is basically the k8s system trying to restart the pods. This means that probes would also fail.
context The problem here is that the kube-controller manager pod is not comming on. its is stuck on the CrashLoopBack status we can confirm this with the command kubectl get pods -n kube-system. This just lists all pods in the kube-system namespace considering that the kube-controller manager is a static pod, we can use the container runtime commands to check its logs. In context of Docker, we would use docker ps but our system uses cri-o and thus we can list all running containers using the command watch crictl ps -a. the -a flag just specifies that we want to see even the failed container The above commnad should list all running containers in the system even the failed and kube-controller-manager should be there Beaing a static pod, we can either use the crictl logs container-id, journalctl or /var/log/syslog file to check for errors fix Using the commad crictl logs container-ID | grep -i error we get an output telling us that there is an error in the manifest file The static pod&rsquo;s manifest files are located in /etc/kubernetes/manifests/ a simple search on the patterns got from the error in the manifest file, we can get the rootcause of the error saving the manifest file will trigger the system to create another pod from the corrected manifest file. This might take awhile, alternatively, we can move the manifest file to another directory and put it back in the kubernetes manifests file. This will manualy trigger the creation of a new kube-controller manager pod running the command kubectl get pods -n kube-system will show the pod in Running state " />
<meta name="keywords" content=", " />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="http://localhost:1313/posts/troubleshooting-misconfigured-kube-controller-manager/" />





  
  <link rel="stylesheet" href="http://localhost:1313/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terminal.min.dd0bf9c7cacb24c1b0184f52f1869b274e06689557468cc7030ccf632328eb97.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Troubleshooting a misconfigured kube-controller manager">
<meta property="og:description" content="Troubleshooting a misconfigured kube-controller manager Lab The main role of a kube-controller manager is to check the health of running containers. This means that in a k8s cluster, if the kube-controller is not operational, it would be impossible to detect failed applications to trigger the sel-healing mechanism which is basically the k8s system trying to restart the pods. This means that probes would also fail.
context The problem here is that the kube-controller manager pod is not comming on. its is stuck on the CrashLoopBack status we can confirm this with the command kubectl get pods -n kube-system. This just lists all pods in the kube-system namespace considering that the kube-controller manager is a static pod, we can use the container runtime commands to check its logs. In context of Docker, we would use docker ps but our system uses cri-o and thus we can list all running containers using the command watch crictl ps -a. the -a flag just specifies that we want to see even the failed container The above commnad should list all running containers in the system even the failed and kube-controller-manager should be there Beaing a static pod, we can either use the crictl logs container-id, journalctl or /var/log/syslog file to check for errors fix Using the commad crictl logs container-ID | grep -i error we get an output telling us that there is an error in the manifest file The static pod&rsquo;s manifest files are located in /etc/kubernetes/manifests/ a simple search on the patterns got from the error in the manifest file, we can get the rootcause of the error saving the manifest file will trigger the system to create another pod from the corrected manifest file. This might take awhile, alternatively, we can move the manifest file to another directory and put it back in the kubernetes manifests file. This will manualy trigger the creation of a new kube-controller manager pod running the command kubectl get pods -n kube-system will show the pod in Running state " />
<meta property="og:url" content="http://localhost:1313/posts/troubleshooting-misconfigured-kube-controller-manager/" />
<meta property="og:site_name" content="Terminal" />

  
  
  <meta property="og:image" content="http://localhost:1313/">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2024-12-03 12:42:47 &#43;0300 EAT" />












</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Alex Nduta
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/articles">Articles</a></li>
        
      
        
          <li><a href="/showcase">CV</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/articles" >Articles</a></li>
        
      
        
          <li><a href="/showcase" >CV</a></li>
        
      
        
          <li><a href="/projects" >Projects</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="http://localhost:1313/posts/troubleshooting-misconfigured-kube-controller-manager/">Troubleshooting a misconfigured kube-controller manager</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-12-03</time><span class="post-author">Alex Kinyanjui</span></div>

  
    <span class="post-tags">
      
      #<a href="http://localhost:1313/tags/"></a>&nbsp;
      
      #<a href="http://localhost:1313/tags/"></a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h1 id="troubleshooting-a-misconfigured-kube-controller-manager">Troubleshooting a misconfigured kube-controller manager<a href="#troubleshooting-a-misconfigured-kube-controller-manager" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p><a href="https://killercoda.com/killer-shell-cka/scenario/kube-controller-manager-misconfigured">Lab</a>
The main role of a <code>kube-controller manager</code> is to check the health of running containers. This means that in a k8s cluster, if the kube-controller is not operational, it would be impossible to detect failed applications to trigger the sel-healing mechanism which is basically the k8s system trying to restart the pods. This means that probes would also fail.</p>
<h2 id="context">context<a href="#context" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>The problem here is that the kube-controller manager pod is not comming on. its is stuck on the <code>CrashLoopBack</code> status</li>
<li>we can confirm this with the command <code>kubectl get pods -n kube-system</code>. This just lists all pods in the <code>kube-system</code> namespace</li>
<li>considering that the <code>kube-controller manager</code> is a static pod, we can use the container runtime commands to check its logs. In context of <code>Docker</code>, we would use <code>docker ps</code> but our system uses <code>cri-o</code> and thus we can list all running containers using the command <code>watch crictl ps -a</code>. the <code>-a</code> flag just specifies that we want to see even the failed container</li>
<li>The above commnad should list all running containers in the system even the failed and <code>kube-controller-manager</code> should be there</li>
<li>Beaing a static pod, we can either use the <code>crictl logs container-id</code>, <code>journalctl</code> or <code>/var/log/syslog</code> file to check for errors</li>
</ul>
<h2 id="fix">fix<a href="#fix" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>Using the commad <code>crictl logs container-ID | grep -i error</code> we get an output telling us that there is an error in the manifest file</li>
<li>The static pod&rsquo;s manifest files are located in <code>/etc/kubernetes/manifests/</code></li>
<li>a simple search on the patterns got from the error in the manifest file, we can get the rootcause of the error</li>
<li>saving the manifest file will trigger the system to create another pod from the corrected manifest file. This might take awhile, alternatively, we can move the manifest file to another directory and put it back in the kubernetes manifests file. This will manualy trigger the creation of a new <code>kube-controller manager</code> pod</li>
<li>running the command <code>kubectl get pods -n kube-system</code> will show the pod in <strong>Running</strong> state</li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h"></span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="http://localhost:1313/posts/aws-securityiam/" class="button inline prev">
        AWS: Identity and Access Management(IAM)
      </a>
    
    
      ::
    
    
      <a href="http://localhost:1313/posts/troubleshooting-misconfigured-kublete/" class="button inline next">
        Troubleshooting a misconfigured kublete
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
